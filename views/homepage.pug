extend layout

block prepend links
      - var homeURL = '/Home/' + user.id;
      - var adURL = '/AdventureAnalytics/' + user.id;
      - var travelURL = '/TravelLog/' + user.id;
      -//li: a(href=homeURL) Home!

block content
        h1 MAP
        p Welcome to the Map!
        link(rel='stylesheet', href='http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css')
        #map(style='height: 500px;')
        script(src='http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js')
        script(src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js")
        script.
            var map = L.map("map").setView([51.505, -0.09], 13);
            var user = !{JSON.stringify(user)};
            function onMarkerClick(e){
                window.location = '/LoggedAdventure/' + user.id;
            }

            function onMapClick(e){
                var marker = L.marker([e.latlng.lat, e.latlng.lng ]).addTo(map);
                marker.on('click', onMarkerClick);
            }

            var adventures = user.adventures; 
            for( var i = 0; i<adventures.length; i++){
                var marker = L.marker([adventures[i].lat, adventures[i].lng]).addTo(map);
                marker.on('click', onMarkerClick);
            }

            map.on('click', onMapClick);
            L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(map);
